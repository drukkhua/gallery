<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>Pinterest-Style Gallery</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
		<script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
		<style>
			:root {
				--primary-color: #e60023;
				--secondary-color: #fff;
				--text-color: #111;
				--border-radius: 16px;
			}

			body {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
					Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
				background-color: #f0f0f0;
				margin: 0;
				padding: 0;
				color: var(--text-color);
			}

			.header {
				background-color: white;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				padding: 16px;
				display: flex;
				align-items: center;
				justify-content: space-between;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
				z-index: 100;
			}

			.logo {
				color: var(--primary-color);
				font-weight: bold;
				font-size: 24px;
			}

			.search-bar {
				flex-grow: 1;
				margin: 0 20px;
				position: relative;
			}

			.search-bar input {
				width: 100%;
				padding: 10px 16px;
				border-radius: 24px;
				border: none;
				background-color: #efefef;
				font-size: 16px;
			}

			.search-bar input:focus {
				outline: none;
				background-color: #e9e9e9;
			}

			.navigation a {
				margin-left: 16px;
				color: #333;
				text-decoration: none;
				font-weight: 500;
			}

			.navigation a:hover {
				color: var(--primary-color);
			}

			.pinterest-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
				gap: 16px;
				width: 100%;
				max-width: 1600px;
				margin: 80px auto 40px;
				padding: 16px;
			}

			@media (min-width: 640px) {
				.pinterest-grid {
					grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
				}
			}

			@media (min-width: 1024px) {
				.pinterest-grid {
					grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
				}
			}

			.pin {
				position: relative;
				border-radius: var(--border-radius);
				overflow: hidden;
				break-inside: avoid;
				background-color: white;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
				transition: transform 0.2s ease, box-shadow 0.2s ease;
				margin-bottom: 16px;
				opacity: 0;
				transform: scale(0.9);
			}

			.pin:hover {
				transform: scale(1.02);
				box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
				z-index: 1;
			}

			.pin-image {
				width: 100%;
				display: block;
				border-radius: var(--border-radius) var(--border-radius) 0 0;
			}

			.pin-video {
				width: 100%;
				display: block;
				border-radius: var(--border-radius) var(--border-radius) 0 0;
				cursor: pointer;
			}

			.pin-content {
				padding: 12px 16px;
			}

			.pin-title {
				font-weight: 600;
				font-size: 16px;
				margin-bottom: 4px;
				color: #333;
			}

			.pin-description {
				font-size: 14px;
				color: #767676;
				margin-bottom: 8px;
			}

			.pin-footer {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 8px 16px;
				border-top: 1px solid #efefef;
			}

			.pin-user {
				display: flex;
				align-items: center;
			}

			.pin-user-avatar {
				width: 24px;
				height: 24px;
				border-radius: 50%;
				margin-right: 8px;
			}

			.pin-user-name {
				font-size: 14px;
				font-weight: 500;
				color: #333;
			}

			.pin-actions {
				display: flex;
			}

			.pin-action {
				width: 32px;
				height: 32px;
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				background-color: #f0f0f0;
				margin-left: 8px;
				cursor: pointer;
				transition: background-color 0.2s;
			}

			.pin-action:hover {
				background-color: #e0e0e0;
			}

			.pin-save-button {
				position: absolute;
				top: 12px;
				right: 12px;
				background-color: var(--primary-color);
				color: white;
				border: none;
				padding: 8px 16px;
				border-radius: 24px;
				font-weight: bold;
				cursor: pointer;
				opacity: 0;
				transition: opacity 0.2s;
			}

			.pin:hover .pin-save-button {
				opacity: 1;
			}

			.category-filter {
				display: flex;
				justify-content: center;
				padding: 16px;
				background: white;
				position: fixed;
				top: 64px;
				left: 0;
				right: 0;
				z-index: 99;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
				overflow-x: auto;
				-webkit-overflow-scrolling: touch;
			}

			.filter-btn {
				white-space: nowrap;
				padding: 8px 16px;
				margin: 0 8px;
				border-radius: 24px;
				border: none;
				background-color: #efefef;
				font-weight: 500;
				cursor: pointer;
				transition: all 0.2s;
			}

			.filter-btn:hover,
			.filter-btn.active {
				background-color: var(--primary-color);
				color: white;
			}

			.lightbox {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(0, 0, 0, 0.9);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 1000;
				opacity: 0;
				pointer-events: none;
				transition: opacity 0.3s;
			}

			.lightbox.active {
				opacity: 1;
				pointer-events: auto;
			}

			.lightbox-content {
				max-width: 90%;
				max-height: 90vh;
				border-radius: 12px;
				overflow: hidden;
				position: relative;
			}

			.lightbox-image {
				max-width: 100%;
				max-height: 90vh;
				display: block;
			}

			.lightbox-video {
				max-width: 100%;
				max-height: 90vh;
				display: block;
			}

			.lightbox-close {
				position: absolute;
				top: 16px;
				right: 16px;
				width: 40px;
				height: 40px;
				border-radius: 50%;
				background-color: rgba(0, 0, 0, 0.5);
				color: white;
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: pointer;
				z-index: 1001;
			}

			.loader {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background-color: white;
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 9999;
			}

			.loader-spinner {
				width: 40px;
				height: 40px;
				border-radius: 50%;
				border: 4px solid rgba(230, 0, 35, 0.1);
				border-top-color: var(--primary-color);
				animation: spin 1s linear infinite;
			}

			@keyframes spin {
				100% {
					transform: rotate(360deg);
				}
			}

			.back-to-top {
				position: fixed;
				bottom: 20px;
				right: 20px;
				width: 50px;
				height: 50px;
				border-radius: 50%;
				background-color: white;
				color: #333;
				display: flex;
				align-items: center;
				justify-content: center;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
				cursor: pointer;
				opacity: 0;
				transition: opacity 0.3s;
				z-index: 99;
			}

			.back-to-top.visible {
				opacity: 1;
			}

			.hidden {
				display: none;
			}

			.pin-tags {
				display: flex;
				flex-wrap: wrap;
				margin-top: 8px;
			}

			.pin-tag {
				font-size: 12px;
				padding: 4px 8px;
				margin-right: 6px;
				margin-bottom: 6px;
				border-radius: 12px;
				background-color: #f0f0f0;
				color: #333;
			}

			.hover-overlay {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(0, 0, 0, 0.05);
				opacity: 0;
				transition: opacity 0.2s;
				pointer-events: none;
				border-radius: var(--border-radius);
			}

			.pin:hover .hover-overlay {
				opacity: 1;
			}

			/* For masonry layout */
			.masonry-grid {
				column-count: 2;
				column-gap: 16px;
				width: 100%;
				max-width: 1600px;
				margin: 80px auto 40px;
				padding: 16px;
			}

			@media (min-width: 640px) {
				.masonry-grid {
					column-count: 3;
				}
			}

			@media (min-width: 1024px) {
				.masonry-grid {
					column-count: 4;
				}
			}

			@media (min-width: 1280px) {
				.masonry-grid {
					column-count: 5;
				}
			}

			.masonry-item {
				break-inside: avoid;
				margin-bottom: 16px;
			}
		</style>
	</head>
	<body>
		<!-- Loader -->
		<div class="loader">
			<div class="loader-spinner"></div>
		</div>

		<!-- Header -->
		<header class="header">
			<div class="logo">П</div>
			<div class="search-bar">
				<input
					type="text"
					placeholder="Пошук..." />
			</div>
			<div class="navigation">
				<a href="#">Головна</a>
				<a href="#">Колекції</a>
				<a href="#">Профіль</a>
			</div>
		</header>

		<!-- Category filter -->
		<div class="category-filter">
			<button
				class="filter-btn active"
				data-filter="all">
				Всі роботи
			</button>
			<button
				class="filter-btn"
				data-filter="business-cards">
				Візитки
			</button>
			<button
				class="filter-btn"
				data-filter="packaging">
				Пакування
			</button>
			<button
				class="filter-btn"
				data-filter="video">
				Відео
			</button>
		</div>

		<!-- Pinterest style masonry grid -->
		<div class="masonry-grid">
			<!-- Item 1 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="business-cards"
					data-type="image"
					data-src="sertificat_02.jpg">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<img
						src="sertificat_02.jpg"
						alt="Сертификат"
						class="pin-image" />
					<div class="pin-content">
						<h3 class="pin-title">Елегантний сертифікат</h3>
						<p class="pin-description">
							350 gsm Сoated paper + digital CMYK + SoftTouch lamination + Gold
							foil
						</p>
						<div class="pin-tags">
							<span class="pin-tag">Сертифікат</span>
							<span class="pin-tag">Преміум</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #e60023"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 2 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="business-cards"
					data-type="image"
					data-src="druk_01_.jpg">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<img
						src="druk_01_.jpg"
						alt="Визитка"
						class="pin-image" />
					<div class="pin-content">
						<h3 class="pin-title">Чорна візитка з фольгуванням</h3>
						<p class="pin-description">
							330 gsm Black Plike + digital White + digital CMYK + Silver foil
						</p>
						<div class="pin-tags">
							<span class="pin-tag">Візитка</span>
							<span class="pin-tag">Преміум</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #5f27cd"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 3 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="video,business-cards"
					data-type="video"
					data-src="druk_video_ready.mov">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<video
						class="pin-video"
						muted
						loop
						autoplay>
						<source
							src="druk_video_ready.mov"
							type="video/mp4" />
					</video>
					<div class="pin-content">
						<h3 class="pin-title">Візитка з фольгуванням</h3>
						<p class="pin-description">Black Plike + White + CMYK + Silver</p>
						<div class="pin-tags">
							<span class="pin-tag">Візитка</span>
							<span class="pin-tag">Відео</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #20bf6b"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 4 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="packaging"
					data-type="image"
					data-src="druk_03_.jpg">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<img
						src="druk_03_.jpg"
						alt="Пакування"
						class="pin-image" />
					<div class="pin-content">
						<h3 class="pin-title">Брендовані пакети</h3>
						<p class="pin-description">
							Повнокольоровий друк, крафт, дизайнерський картон
						</p>
						<div class="pin-tags">
							<span class="pin-tag">Пакування</span>
							<span class="pin-tag">Бренд</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #0fb9b1"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 5 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="business-cards"
					data-type="image"
					data-src="druk_02_.jpg">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<img
						src="druk_02_.jpg"
						alt="Визитка"
						class="pin-image" />
					<div class="pin-content">
						<h3 class="pin-title">Чорна візитка з фольгуванням</h3>
						<p class="pin-description">
							330 gsm Black Plike + digital White + digital CMYK + Silver foil
						</p>
						<div class="pin-tags">
							<span class="pin-tag">Візитка</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #eb3b5a"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 6 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="packaging"
					data-type="image"
					data-src="druk_photo_01.jpg">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<img
						src="druk_photo_01.jpg"
						alt="Пакування"
						class="pin-image" />
					<div class="pin-content">
						<h3 class="pin-title">Преміум пакування</h3>
						<p class="pin-description">Дизайнерський картон, фольгування</p>
						<div class="pin-tags">
							<span class="pin-tag">Пакування</span>
							<span class="pin-tag">Преміум</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #f7b731"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 7 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="video"
					data-type="video"
					data-src="druk_thank_you.mp4">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<video
						class="pin-video"
						muted
						loop
						autoplay>
						<source
							src="druk_thank_you.mp4"
							type="video/mp4" />
					</video>
					<div class="pin-content">
						<h3 class="pin-title">Thank You Card</h3>
						<p class="pin-description">
							Особливе доповнення до вашого замовлення
						</p>
						<div class="pin-tags">
							<span class="pin-tag">Відео</span>
							<span class="pin-tag">Картка</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #3867d6"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 8 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="business-cards"
					data-type="image"
					data-src="vizitka_chebar_01.jpg">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<img
						src="vizitka_chebar_01.jpg"
						alt="Визитка CheBar"
						class="pin-image" />
					<div class="pin-content">
						<h3 class="pin-title">CheBar - Преміум візитка</h3>
						<p class="pin-description">Дизайнерський картон, фольгування</p>
						<div class="pin-tags">
							<span class="pin-tag">Візитка</span>
							<span class="pin-tag">Преміум</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #4b6584"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 9 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="video,business-cards"
					data-type="video"
					data-src="CheBar.mov">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<video
						class="pin-video"
						muted
						loop
						autoplay>
						<source
							src="CheBar.mov"
							type="video/mp4" />
					</video>
					<div class="pin-content">
						<h3 class="pin-title">CheBar - Елегантна візитка</h3>
						<p class="pin-description">Black Plike + White + CMYK + Silver</p>
						<div class="pin-tags">
							<span class="pin-tag">Візитка</span>
							<span class="pin-tag">Відео</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #fc5c65"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 10 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="packaging"
					data-type="image"
					data-src="beauty.jpg">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<img
						src="beauty.jpg"
						alt="Beauty Packaging"
						class="pin-image" />
					<div class="pin-content">
						<h3 class="pin-title">Beauty Packaging</h3>
						<p class="pin-description">Елегантне пакування для косметики</p>
						<div class="pin-tags">
							<span class="pin-tag">Пакування</span>
							<span class="pin-tag">Косметика</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #fd9644"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 11 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="packaging"
					data-type="image"
					data-src="new_year.jpg">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<img
						src="new_year.jpg"
						alt="Новорічне пакування"
						class="pin-image" />
					<div class="pin-content">
						<h3 class="pin-title">Новорічне пакування</h3>
						<p class="pin-description">Спеціальне святкове оформлення</p>
						<div class="pin-tags">
							<span class="pin-tag">Пакування</span>
							<span class="pin-tag">Свято</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #26de81"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Item 12 -->
			<div class="masonry-item">
				<div
					class="pin"
					data-category="video"
					data-type="video"
					data-src="druk_video_01.mp4">
					<div class="hover-overlay"></div>
					<button class="pin-save-button">Зберегти</button>
					<video
						class="pin-video"
						muted
						loop
						autoplay>
						<source
							src="druk_video_01.mp4"
							type="video/mp4" />
					</video>
					<div class="pin-content">
						<h3 class="pin-title">Друк і обробка</h3>
						<p class="pin-description">Подивіться на якість нашої роботи</p>
						<div class="pin-tags">
							<span class="pin-tag">Відео</span>
							<span class="pin-tag">Процес</span>
						</div>
					</div>
					<div class="pin-footer">
						<div class="pin-user">
							<div
								class="pin-user-avatar"
								style="background-color: #a55eea"></div>
							<span class="pin-user-name">Яскравий друк</span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Lightbox -->
		<div class="lightbox">
			<div class="lightbox-close">✕</div>
			<div class="lightbox-content"></div>
		</div>

		<!-- Back to top button -->
		<div class="back-to-top">
			<svg
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
				xmlns="http://www.w3.org/2000/svg">
				<path
					d="M12 5L5 12H19L12 5Z"
					fill="currentColor" />
				<path
					d="M19 20H5V18H19V20Z"
					fill="currentColor" />
			</svg>
		</div>

		<script>
			// Initialize GSAP
			gsap.registerPlugin(ScrollTrigger);

			document.addEventListener('DOMContentLoaded', function () {
				// Preloader
				window.addEventListener('load', function () {
					const loader = document.querySelector('.loader');
					setTimeout(() => {
						gsap.to(loader, {
							opacity: 0,
							duration: 0.5,
							onComplete: () => {
								loader.style.display = 'none';
								animatePins();
							},
						});
					}, 500);
				});

				// Animate pins on load
				function animatePins() {
					const pins = document.querySelectorAll('.pin');
					gsap.to(pins, {
						opacity: 1,
						scale: 1,
						duration: 0.5,
						stagger: 0.05,
						ease: 'power2.out',
					});
				}

				// Video playback control
				const videos = document.querySelectorAll('.pin-video');
				videos.forEach((video) => {
					// Ensure videos play on hover for mobile
					video.parentElement.addEventListener('mouseenter', () => {
						video.play();
					});

					// Pause when out of viewport
					ScrollTrigger.create({
						trigger: video,
						start: 'top bottom',
						end: 'bottom top',
						onEnter: () => video.play(),
						onLeave: () => video.pause(),
						onEnterBack: () => video.play(),
						onLeaveBack: () => video.pause(),
					});
				});

				// Category filter
				const filterButtons = document.querySelectorAll('.filter-btn');
				const pins = document.querySelectorAll('.pin');

				filterButtons.forEach((button) => {
					button.addEventListener('click', () => {
						// Remove active class
						filterButtons.forEach((btn) => btn.classList.remove('active'));
						// Add active class
						button.classList.add('active');

						const filter = button.getAttribute('data-filter');

						pins.forEach((pin) => {
							const categories = pin.getAttribute('data-category').split(',');
							const masonryItem = pin.parentElement;

							if (filter === 'all' || categories.includes(filter)) {
								gsap.to(masonryItem, {
									opacity: 1,
									height: 'auto',
									duration: 0.4,
									ease: 'power2.out',
									onStart: () => {
										masonryItem.style.display = 'block';
									},
								});
							} else {
								gsap.to(masonryItem, {
									opacity: 0,
									height: 0,
									duration: 0.4,
									ease: 'power2.out',
									onComplete: () => {
										masonryItem.style.display = 'none';
									},
								});
							}
						});
					});
				});

				// Lightbox functionality
				const lightbox = document.querySelector('.lightbox');
				const lightboxContent = document.querySelector('.lightbox-content');
				const lightboxClose = document.querySelector('.lightbox-close');
				let currentPin = null;

				// Open lightbox when clicking on a pin
				pins.forEach((pin) => {
					pin.addEventListener('click', () => {
						const src = pin.getAttribute('data-src');
						const type = pin.getAttribute('data-type');

						currentPin = pin;
						openLightbox(src, type);
					});
				});

				// Close lightbox
				lightboxClose.addEventListener('click', closeLightbox);
				lightbox.addEventListener('click', (e) => {
					if (e.target === lightbox) {
						closeLightbox();
					}
				});

				// Escape key to close lightbox
				document.addEventListener('keydown', (e) => {
					if (e.key === 'Escape' && lightbox.classList.contains('active')) {
						closeLightbox();
					}
				});

				function openLightbox(src, type) {
					lightboxContent.innerHTML = '';

					if (type === 'image') {
						const img = document.createElement('img');
						img.src = src;
						img.className = 'lightbox-image';
						lightboxContent.appendChild(img);
					} else if (type === 'video') {
						const video = document.createElement('video');
						video.src = src;
						video.controls = true;
						video.autoplay = true;
						video.className = 'lightbox-video';
						lightboxContent.appendChild(video);
					}

					lightbox.classList.add('active');
					document.body.style.overflow = 'hidden';
				}

				function closeLightbox() {
					lightbox.classList.remove('active');
					document.body.style.overflow = '';

					const video = lightboxContent.querySelector('video');
					if (video) {
						video.pause();
					}
				}

				// Back to top button
				const backToTopButton = document.querySelector('.back-to-top');

				window.addEventListener('scroll', () => {
					if (window.scrollY > 500) {
						backToTopButton.classList.add('visible');
					} else {
						backToTopButton.classList.remove('visible');
					}
				});

				backToTopButton.addEventListener('click', () => {
					window.scrollTo({
						top: 0,
						behavior: 'smooth',
					});
				});

				// Save button functionality (simulation)
				const saveButtons = document.querySelectorAll('.pin-save-button');
				saveButtons.forEach((button) => {
					button.addEventListener('click', (e) => {
						e.stopPropagation(); // Prevent opening lightbox
						button.textContent = 'Збережено';
						button.style.backgroundColor = '#4BB543';

						// Reset after 2 seconds
						setTimeout(() => {
							button.textContent = 'Зберегти';
							button.style.backgroundColor = '';
						}, 2000);
					});
				});

				// Simulate hover on touch devices
				if ('ontouchstart' in window) {
					pins.forEach((pin) => {
						pin.addEventListener('touchstart', () => {
							// Remove hover from all other pins
							pins.forEach((p) => {
								if (p !== pin) {
									p.classList.remove('touch-hover');
								}
							});

							// Toggle hover on this pin
							pin.classList.toggle('touch-hover');
						});
					});
				}

				// Infinite scroll simulation
				let isLoading = false;
				const loadMoreItems = () => {
					if (isLoading) return;

					const scrollPosition = window.scrollY + window.innerHeight;
					const pageHeight = document.body.scrollHeight - 200;

					if (scrollPosition >= pageHeight) {
						isLoading = true;

						// Here you would normally fetch more items from the server
						// For this demo, just clone existing items
						setTimeout(() => {
							const grid = document.querySelector('.masonry-grid');
							const items = document.querySelectorAll('.masonry-item');

							// Clone some random items
							for (let i = 0; i < 4; i++) {
								const randomIndex = Math.floor(Math.random() * items.length);
								const clone = items[randomIndex].cloneNode(true);

								// Update data attributes to make them unique
								const pin = clone.querySelector('.pin');
								pin.setAttribute('data-clone', 'true');

								// Reinitialize event listeners for cloned elements
								const pinImage = clone.querySelector('.pin-image, .pin-video');
								if (pinImage) {
									pinImage.addEventListener('click', (e) => {
										e.stopPropagation();
										const src = pin.getAttribute('data-src');
										const type = pin.getAttribute('data-type');
										openLightbox(src, type);
									});
								}

								const saveButton = clone.querySelector('.pin-save-button');
								if (saveButton) {
									saveButton.addEventListener('click', (e) => {
										e.stopPropagation();
										saveButton.textContent = 'Збережено';
										saveButton.style.backgroundColor = '#4BB543';

										setTimeout(() => {
											saveButton.textContent = 'Зберегти';
											saveButton.style.backgroundColor = '';
										}, 2000);
									});
								}

								// Animate in the new item
								gsap.set(clone, { opacity: 0, y: 50 });
								grid.appendChild(clone);

								gsap.to(clone, {
									opacity: 1,
									y: 0,
									duration: 0.5,
									delay: i * 0.1,
								});
							}

							isLoading = false;
						}, 1000);
					}
				};

				window.addEventListener('scroll', loadMoreItems);
			});
		</script>
	</body>
</html>
